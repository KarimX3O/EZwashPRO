<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØµÙˆÙ„Ø§Øª</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      direction: rtl;
      background: #f2f2f2;
      padding: 20px;
    }
    button {
  border: 2px solid #333/* Ù„ÙˆÙ† Ø§Ù„Ø¨ÙˆØ±Ø¯Ø± Ø¨Ø§Ù„Ø£Ø­Ù…Ø± */
}

    .container {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      max-width: 700px;
      margin: auto;
    }

    .receipt {
      border: 1px solid #ccc;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 15px;
      background: #fafafa;
      line-height: 1.8;
      position: relative;
    }

    .back-btn {
      display: inline-block;
      margin-bottom: 20px;
      text-decoration: none;
      color: black;
      border: 2px solid #333;
      padding: 8px 14px;
      border-radius: 6px;
    }

    #searchInput {
      width: 95%;
      padding: 12px;
      margin-bottom: 20px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .delete-btn {
      position: absolute;
      top: 10px;
      left: 10px;
      background: #e74c3c;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 14px;
    }

    .delete-btn:hover {
      background: #c0392b;
    }
    #click-btn{
    
      display: inline-block;
      margin-bottom: 20px;
      text-decoration: none;
      color: black;
      padding: 2px 7px;
      border-radius: 6px;
    }
    img{
      width: 20px;
      height: 20px;
    }
  </style>
</head>
<body>
  <a class="back-btn" href="index.html">Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
<button onclick="fast()" id="click-btn"> 
  <img src="images/clock.png" alt="">
  ï¸Ø§Ù„ÙˆØµÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø³ØªØ¹Ø¬Ù„Ø©</button>
  <button onclick="paid()" id="click-btn"> 
  <img  src="images/usd.png" alt="">
  Ø§Ù„ÙˆØµÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</button>

  <div class="container">
    <h2>ğŸ“œ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØµÙˆÙ„Ø§Øª</h2>
    <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù…ØŒ Ø±Ù‚Ù… Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„ÙˆØµÙ„...">
    <div id="receiptsContainer"></div>
  </div>

<script>
  let receipts = JSON.parse(localStorage.getItem('receipts') || '[]').reverse();
  const container = document.getElementById("receiptsContainer");
  const searchInput = document.getElementById("searchInput");

  const totalBox = document.createElement("div");
  totalBox.style.marginBottom = "15px";
  totalBox.style.fontWeight = "bold";
  totalBox.style.fontSize = "18px";
  totalBox.style.color = "green";
  container.parentNode.insertBefore(totalBox, container);

  function displayReceipts(list) {
    container.innerHTML = "";
    if (list.length === 0) {
      container.innerHTML = "<p>âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØµÙˆÙ„Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø©.</p>";
      totalBox.innerHTML = "";
      return;
    }

    const nameQuery = searchInput.value.trim().toLowerCase();
    if (nameQuery) {
      const sameNameReceipts = receipts.filter(r =>
        r.name && r.name.toLowerCase() === nameQuery
      );
      if (sameNameReceipts.length > 0) {
        const totalSum = sameNameReceipts.reduce((sum, r) => {
          const amount = parseFloat((r.total || '0').toString().replace(/[^\d.-]/g, ''));
          return sum + amount;
        }, 0);
        totalBox.innerHTML = `ğŸ’µ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ Ù„Ù„ÙˆØµÙˆÙ„Ø§Øª Ø¨Ø§Ø³Ù… "<strong>${sameNameReceipts[0].name}</strong>" Ù‡Ùˆ: ${totalSum} Ø¯Ø±Ù‡Ù…`;
      } else {
        totalBox.innerHTML = "";
      }
    } else {
      totalBox.innerHTML = "";
    }

    list.forEach((r) => {
      const div = document.createElement("div");
      div.className = "receipt";
      div.innerHTML = `
        <button class="delete-btn" onclick="deleteReceipt('${r.id}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
        ğŸ§¾ <strong>Ø±Ù‚Ù…:</strong> ${r.id || '---'}<br>
        ğŸ“… <strong>ØªØ§Ø±ÙŠØ®:</strong> ${r.date || '---'}<br>
        ğŸ‘¤ <strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${r.name || '---'}<br>
        ğŸ“² <strong>Ø§Ù„Ø±Ù‚Ù…:</strong> ${r.number || '---'}<br>
        ğŸ’° <strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</strong> ${r.total || '---'} Ø¯Ø±Ù‡Ù…<br>
        ğŸ§º <pre>${r.content || ''}</pre>
      `;
      container.appendChild(div);
    });
  }

  function deleteReceipt(id) {
    if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙˆØµÙ„ØŸ")) {
      receipts = receipts.filter(r => r.id !== id);
      localStorage.setItem('receipts', JSON.stringify(receipts.slice().reverse()));
      displayReceipts(filterReceipts(searchInput.value));
    }
  }

  function filterReceipts(query) {
    query = query.trim().toLowerCase();
    return receipts.filter(r =>
      (r.name && r.name.toLowerCase().includes(query)) ||
      (r.number && r.number.includes(query)) ||
      (r.id && r.id.includes(query))
    );
  }

  displayReceipts(receipts);

  searchInput.addEventListener("input", function () {
    const filtered = filterReceipts(this.value);
    displayReceipts(filtered);
  });

  function paid() {
    window.location.href = 'paid.html';
  }

  function fast() {
    window.location.href = 'fast.html';
  }
</script>


</body>
</html>
